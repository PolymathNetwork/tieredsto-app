(this["webpackJsonptieredsto-app"]=this["webpackJsonptieredsto-app"]||[]).push([[0],{1048:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),c=n.n(l),o=(n(420),n(106)),s=n(4),i=n.n(s),u=n(413),d=n(127),m=n(156),E=n(1051),f=n(399),p=n(1052),b=n(68),g=n(1056),y=n(1059),k=n(1053),v=n(1049),S=n(22),h=n.n(S),D=["ETH","POLY","DAI (USD Stablecoin)","Non-USD Stablecoin"],w=y.a.Item,A=[{title:"Tokens on Sale",dataIndex:"tokensOnSale",key:"tokensOnSale",render:function(e){return T(e)}},{title:"Tokens Sold",dataIndex:"tokensSold",key:"tokensSold",render:function(e){return T(e)}},{title:"Price",dataIndex:"price",key:"price",render:function(e){return T(e)}},{title:"Tokens on Discount",dataIndex:"tokensWithDiscount",key:"tokensWithDiscount",render:function(e){return T(e)}},{title:"Tokens Sold on Discount",dataIndex:"tokensSoldAtDiscount",key:"tokensSoldAtDiscount",render:function(e){return T(e)}},{title:"Discounted Price",dataIndex:"discountedPrice",key:"discountedPrice",render:function(e){return T(e)}}],O=function(e){return h()(e).format("dddd, MMMM Do YYYY, h:mm:ss a")},T=function(e){return e.toString()},C=function(e){return e?"True":"False"},x=function(e){var t=e.address,n=e.startDate,l=e.endDate,c=e.raisedFundsWallet,o=e.unsoldTokensWallet,s=e.raisedAmount,i=e.soldTokensAmount,u=e.investorCount,d=e.fundraiseCurrencies,m=e.isPaused,E=e.capReached,f=e.isFinalized,p=e.preIssueAllowed,b=e.beneficialInvestmentsAllowed,g=e.currentTier,S=e.tiers;return S=S.map((function(e,t){return e.key=t,e})),r.a.createElement(a.Fragment,null,r.a.createElement(y.a,{style:{textAlign:"initial"},column:2,size:"small"},r.a.createElement(w,{label:"Starts"},O(n)),r.a.createElement(w,{label:"Ends"},O(l)),r.a.createElement(w,{label:"Address",span:2},t),r.a.createElement(w,{label:"Raised Funds Wallet",span:2},c),r.a.createElement(w,{label:"Unsold Tokens Wallet",span:2},o),r.a.createElement(w,{label:"Raised Amount"},T(s)),r.a.createElement(w,{label:"Sold Tokens Amount"},T(i)),r.a.createElement(w,{label:"Investor Count"},T(u)),r.a.createElement(w,{label:"Fund-raise Currencies"},d.map((function(e){return function(e){return D[e]}(e)})).join(", ")),r.a.createElement(w,{label:"Is Paused"},C(m)),r.a.createElement(w,{label:"Cap Reached"},C(E)),r.a.createElement(w,{label:"Is Finalized"},C(f)),r.a.createElement(w,{label:"Pre-issuance Allowed"},C(p)),r.a.createElement(w,{label:"Beneficial Investments Allowed"},C(b)),r.a.createElement(w,{label:"Current Tier"},g)),r.a.createElement("h4",null,"Tiers"),r.a.createElement(k.a,{size:"small",pagination:!1,columns:A,rowKey:"key",dataSource:S}),r.a.createElement(v.a,null))},I=n(256),j=n(402),Y=n.n(j),F=n(151),P=n(1055),R=n(1054),M=n(1057),N=n(1058),_=n(1050),L=n(403),W=n(92),q=F.a.Option,U=P.a.Item,z={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},V=function(e,t,n){t&&!L.isAddress(t)?n("Address is invalid"):n()},B=function(e){var t=e.walletAddress,n=e.launchSTO,l=(e.network,Y()()),c=l.getFieldDecorator,s=l.validateFields,u=l.resetFields,d=Object(a.useState)(1),m=Object(o.a)(d,2),E=m[0],f=m[1],p=Object(a.useState)(!0),g=Object(o.a)(p,2),y=g[0],k=g[1],v=Object(a.useState)("USD"),S=Object(o.a)(v,2),w=S[0],A=S[1],O=Object(I.a)(Array(E).keys());console.log("tiersArray",E,O),console.log("Is USD",y);return r.a.createElement(P.a,Object.assign({colon:!1,style:{maxWidth:650,textAlign:"left"}},z),r.a.createElement(U,{label:"Start Date"},c("startDate",{initialValue:h()("2020-02-01","YYYY-MM-DD"),rules:[{required:!0}]})(r.a.createElement(R.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))),r.a.createElement(U,{label:"End Date"},c("endDate",{initialValue:h()("2020-02-05","YYYY-MM-DD"),rules:[{required:!0}]})(r.a.createElement(R.a,{showTime:!0,format:"YYYY-MM-DD HH:mm:ss"}))),r.a.createElement(U,{label:"Non-accredited Investment Limit"},c("nonAccreditedInvestmentLimit",{initialValue:5,rules:[{required:!0}]})(r.a.createElement(M.a,null))),r.a.createElement(U,{label:"Minimum Investment"},c("minimumInvestment",{initialValue:5,rules:[{required:!0}]})(r.a.createElement(M.a,null))),r.a.createElement(U,{label:"Fund-raise Currency"},c("currency",{rules:[{required:!0}]})(r.a.createElement(F.a,{onChange:function(e){console.log("currency value",e),3==e?k(!1):(k(!0),A("USD"))}},D.map((function(e,t){return r.a.createElement(q,{key:t},e)}))))),!y&&r.a.createElement(a.Fragment,null,r.a.createElement(U,{label:"Currency Symbol"},c("denomination",{rules:[{required:!0},{pattern:/^[a-zA-Z]{3}$/,message:"Please enter a valid three character currency symbol."}]})(r.a.createElement(N.a,{onChange:function(e){console.log(e.target.value),RegExp(/^[a-zA-Z]{3}$/).test(e.target.value)&&A(e.target.value)}}))),r.a.createElement(U,{label:"Non-USD Stablecoin Address"},c("stablecoinAddress",{rules:[{required:!0},{validator:V}]})(r.a.createElement(N.a,null)))),r.a.createElement(U,{label:"Raised Funds Wallet"},c("raisedFundsWallet",{initialValue:t,rules:[{required:!0},{validator:V}]})(r.a.createElement(N.a,null))),r.a.createElement(U,{label:"Unsold Tokens Wallet"},c("unsoldTokensWallet",{initialValue:t,rules:[{required:!0},{validator:V}]})(r.a.createElement(N.a,null))),r.a.createElement(U,{label:"Allow Pre-minting"},c("allowPreissuance",{initialValue:!1,valuePropName:"checked"})(r.a.createElement(_.a,null))),r.a.createElement(U,{label:"Tiers #"},r.a.createElement(F.a,{value:E,onChange:function(e){return f(Number(e))}},[1,2,3,4,5].map((function(e){return r.a.createElement(q,{key:e},e)})))),r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Tokens on Sale"),r.a.createElement("td",null,"Price"),r.a.createElement("td",null,"Discounted Tokens"),r.a.createElement("td",null,"Discounted Price")),O.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,c("tokensOnSale_".concat(e),{initialValue:5,rules:[{required:!0}]})(r.a.createElement(M.a,{placeholder:"Tokens on Sale"}))),r.a.createElement("td",null,c("price_".concat(e),{initialValue:5,rules:[{required:!0}]})(r.a.createElement(M.a,{placeholder:"Price"}))),r.a.createElement("td",null,c("tokensWithDiscount_".concat(e))(r.a.createElement(M.a,{placeholder:"Tokens on Discount"}))),r.a.createElement("td",null,c("discountedPrice_".concat(e))(r.a.createElement(M.a,{placeholder:"Discounted Price"}))))}))),r.a.createElement(U,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},r.a.createElement(b.a,{onClick:function(){u()}},"Cancel"),r.a.createElement(b.a,{type:"primary",onClick:function(e){var t,a,r;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:e.preventDefault(),t=["tokensOnSale","price","tokensWithDiscount","discountedPrice"],a=["startDate","endDate","nonAccreditedInvestmentLimit","minimumInvestment","currencies","raisedFundsWallet","unsoldTokensWallet","allowPreissuance"],y||(a.push("currency"),a.push("stablecoinAddress")),O.forEach((function(e){a.push.apply(a,Object(I.a)(t.map((function(t){return"".concat(t,"_").concat(e)}))))})),r=["0xc4375b7de8af5a38a93548eb8453a498222c4ff2"],s(a,{force:!0}).then((function(e){var a;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:a=Number(e.currency),e.currencies=3===a?[2]:[a],e.stableCoinAddresses=y?r:[e.stablecoinAddress],e.startDate=e.startDate.toDate(),e.endDate=e.endDate.toDate(),e.minimumInvestment=new W.BigNumber(e.minimumInvestment),e.nonAccreditedInvestmentLimit=new W.BigNumber(e.nonAccreditedInvestmentLimit),y||(e.customCurrency={currencySymbol:w}),e.tiers=[],O.forEach((function(n){e.tiers[n]={},t.forEach((function(t){"number"===typeof e["".concat(t,"_").concat(n)]?e.tiers[n][t]=new W.BigNumber(e["".concat(t,"_").concat(n)]):e.tiers[n][t]=e["".concat(t,"_").concat(n)],delete e["".concat(t,"_").concat(n)]}))})),n(e);case 11:case"end":return l.stop()}}))})).catch((function(e){return console.error(e.message)}));case 7:case"end":return l.stop()}}))}},"Save")))},H=E.a.Content,K=E.a.Header,$=E.a.Sider;function J(e,t){var n,a,r=arguments;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:"",l.prev=1,e({type:"ASYNC_START",msg:n}),l.next=5,i.a.awrap(t());case 5:a=l.sent,e(Object(d.a)({type:"ASYNC_COMPLETE"},a)),l.next=12;break;case 9:l.prev=9,l.t0=l.catch(1),e({type:"ASYNC_ERROR",error:l.t0.message});case 12:case"end":return l.stop()}}),null,null,[[1,9]])}var Z=function(){var e=Object(a.useContext)(X),t=Object(o.a)(e,2),n=t[0],l=t[1],c=Object(m.c)(),s=c.error,u=c.sdk,d=c.networkId,y=c.walletAddress,k=Object(m.d)(u,y),v=k.error,S=k.tokenSelector,h=k.tokens,D=k.tokenIndex,w=Object(a.useState)(!1),A=Object(o.a)(w,2),O=A[0],T=A[1],C=n.AppReducer,I=C.loading,j=C.loadingMessage,Y=C.error,F=C.stos,P=h[D];return(Y=Y||s||v)||j||(u?h.length||(I=!0,j="Loading your security tokens"):(I=!0,j="Initializing Polymath SDK")),Object(a.useEffect)((function(){P&&null===F&&J(l,(function(){return function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(P.issuance.offerings.getStos());case 2:return t.t0=function(e){return"Tiered"===e.stoType},e=t.sent.filter(t.t0),t.abrupt("return",{stos:e});case 5:case"end":return t.stop()}}))}()}),"Loading Security Token Offerings.")}),[P,F]),window.token=P,console.log(F),r.a.createElement("div",null,r.a.createElement(f.a,{spinning:I,tip:j,size:"large"},r.a.createElement(E.a,null,r.a.createElement(K,{style:{backgroundColor:"white",display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center"}},r.a.createElement(m.a,{networkId:d}),r.a.createElement(m.b,{walletAddress:y})),r.a.createElement(E.a,null,r.a.createElement($,{width:350,style:{padding:50,backgroundColor:"#FAFDFF"}},y&&h&&r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:250,justifyContent:"flex-start"}},S({onTokenSelect:function(){return l({type:"TOKEN_SELECTED"})}}))),r.a.createElement(H,{style:{padding:50,backgroundColor:"#FAFDFF"}},Y&&r.a.createElement(p.a,{message:Y,type:"error",closable:!0,showIcon:!0}),P&&r.a.createElement(a.Fragment,null,r.a.createElement(b.a,{style:{marginBottom:20,alignSelf:"flex-end"},type:"primary",onClick:function(){return T(!0)}},"LAUNCH TIERED STO"),r.a.createElement(g.a,{title:"Tiered STO",visible:O,width:750,onOk:function(){return T(!1)},onCancel:function(){return T(!1)}},r.a.createElement(B,{walletAddress:y,launchSTO:function(e){J(l,(function(){return function(){var t,n;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Launching STO",e),a.next=3,i.a.awrap(P.issuance.offerings.launchTieredSto(e));case 3:return t=a.sent,a.next=6,i.a.awrap(t.run());case 6:n=a.sent,console.log("LaunchSTO ret",n),l({type:"TOKEN_SELECTED"});case 9:case"end":return a.stop()}}))}()}),"Launching STO..")}}))),F&&F.map((function(e){return r.a.createElement(x,Object.assign({key:e.address},e))})))))))},G=function(e){return function(t,n){var a,r=Object.keys(e).reduce((function(r,l){return r[l]=e[l](t[l],n),a=a||r[l]!==t[l],r}),{});return a?r:t}}({AppReducer:function(e,t){switch(console.log("ACTION",t),t.type){case"ASYNC_START":return Object(d.a)({},e,{loading:!0,loadingMessage:t.msg,error:void 0});case"ASYNC_COMPLETE":t.type;var n=Object(u.a)(t,["type"]);return Object(d.a)({},e,{},n,{loading:!1,loadingMessage:"",error:void 0});case"ERROR":case"ASYNC_ERROR":var a=t.error;return Object(d.a)({},e,{loading:!1,loadingMessage:"",error:a});case"TOKEN_SELECTED":var r=t.tokenIndex;return Object(d.a)({},e,{tokenIndex:r,error:void 0,stos:null});default:throw new Error("Unrecognized action type: ".concat(t.type))}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.d(t,"Store",(function(){return X}));var Q={AppReducer:{loading:!1,loadingMessage:"",error:void 0,walletAddress:"",stos:null}},X=Object(a.createContext)();c.a.render(r.a.createElement((function(){var e=Object(a.useReducer)(G,Q);return r.a.createElement(X.Provider,{value:e},r.a.createElement(Z,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},415:function(e,t,n){e.exports=n(1048)},420:function(e,t,n){},584:function(e,t){},586:function(e,t){},605:function(e,t){},607:function(e,t){},861:function(e,t){}},[[415,1,2]]]);
//# sourceMappingURL=main.c9362759.chunk.js.map